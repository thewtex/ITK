# Set the important envirimental variables that auto-conf uses to
# configure, mostly these are passed from the CMake
# configuration. Others are just explicitly passed from the
# enviroment. If there is a problem with them in the future they can
# be addressed in CMake with the same structure.


#--Some influential environment variables:
#--  CC          C compiler command
#--  CFLAGS      C compiler flags
#--  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
#--              nonstandard directory <lib dir>
#--  LIBS        libraries to pass to the linker, e.g. -l<library>
#--  CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
#--              you have headers in a nonstandard directory <include dir>

set(ENV{CC} "@CMAKE_C_COMPILER@ @CMAKE_C_COMPILER_ARG1@")
set(ENV{CFLAGS} "@CMAKE_C_FLAGS@ @CMAKE_C_FLAGS_RELEASE@")
set(ENV{LDFLAGS} "@CMAKE_LINKER_FLAGS@ @CMAKE_LINKER_FLAGS_RELEASE@")

set(ENV{LIBS} "$ENV{LIBS}")

set(ENV{CPP} "$ENV{CPP}")
set(ENV{CPPFLAGS} "$ENV{CPPFLAGS}")

execute_process(
  COMMAND sh @fftwf_source_dir@/configure
    @FFTW_SHARED_FLAG@
    @FFTW_OPTIMIZATION_CONFIGURATION@
    @FFTW_THREADS_CONFIGURATION@
    --disable-fortran
    --enable-float
    --prefix=@ITK_BINARY_DIR@/fftw
  WORKING_DIRECTORY @fftwf_binary_dir@
)
